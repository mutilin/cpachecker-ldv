CPAchecker Installation Requirements

Requirements for executing CPAchecker:
0. Sources have to be preprocessed by CIL
   (http://hal.cs.berkeley.edu/cil/, mirror at http://www.cs.berkeley.edu/~necula/cil/).
   Necessary flags:
   --dosimplify --printCilAsIs --save-temps --domakeCFG
   Possibly necessary flags:
   --dosimpleMem
   Comments:
   --save-temps saves files to the current directory, a different directory can
   be specified by using --save-temps=<DIRECTORY>

Building CPAchecker:
--------------------
1. Install Java 1.6 SDK or higher (OpenJDK 6 works, too).
   http://java.sun.com/
2. Checkout CPAchecker from SVN repository.
   URL: https://svn.sosy-lab.org/software/cpachecker/trunk
   URL (read-only mirror): http://cpachecker.googlecode.com/svn/trunk
3. Install ant (anything since version 1.6 should be ok).
   The optional ant tasks are needed (in Ubuntu they are packaged as ant-optional).
4. Run "ant" in CPAchecker directory to build CPAchecker.

Running CPAchecker:
-------------------
5. Choose a source code file that you want to be checked.
   Several types of example programs can be found in test/programs/
   If you use your own program, remember to pre-process it with CIL (see above).
   Example: test/programs/simple/loop1.c
6. If you want to enable certain analyses like predicate analysis,
   choose a configuration file. This file defines for example which CPAs are used.
   Standard configuration files can be found in the directory test/config/.
   Example: test/config/explicitAnalysis.properties
   The configuration options used in this file are explained in HowToConfiguration.txt.
7. Choose a specification file (you may not need this for some CPAs).
   The standard configuration files use test/config/automata/ErrorLocationAutomaton.txt
   as the default specification. With this one, CPAchecker will look for labels
   named "ERROR" and assertions in the source code file.
   Other examples for specifications can be found in test/config/automata/.
8. Execute "scripts/cpa.sh [ -config <CONFIG_FILE> ] [ -spec <SPEC_FILE> ] <SOURCE_FILE>"
   Either a configuration file or a specification file needs to be given.
   The current directory should be the CPAchecker project directory.
   Additional command line switches are described in HowToConfiguration.txt.
   Example: scripts/cpa.sh -config test/config/explicitAnalysis.properties test/programs/simple/loop1.c
   This example can also be abbreviated to:
   scripts/cpa.sh -explicitAnalysis test/programs/simple/loop1.c
9. Additionally to the console output, there will be several output files in test/output/:
     ART.dot: Visualization of abstract reachability tree (Graphviz format)
     cfa*.dot: Visualization of control flow automaton (Graphviz format)
     counterexample.msat: Formula representation of the error path
     ErrorPath.txt: A path through the program that leads to an error
     ErrorPathAssignment.txt: Assignments for all variables on the error path.
     predmap.txt: Predicates used by predicate analysis to prove program safety
     reached.txt: Dump of all reached abstract states
     Statistics.txt: Time statistics (can also be printed to console with "-stats")
   Note that not all of these files will be available for all configurations.
   Also some of these files are only produced if an error is found (or vice-versa).
   CPAchecker will overwrite files in this directory!
   These files may be used to generate a report that can be viewed in a browser.
   See HowToBuildReport.txt for this.

Running test cases:
-------------------
1. Build CPAchecker as described above.
2. You need ant-junit.jar (on Debian/Ubuntu included in the package ant-optional).
3. Run "ant tests" from the project root directory. The output (including the test
   results) will be in test/output/.

Building and running CPAchecker from within Eclipse:
----------------------------------------------------
1. Install Eclipse 3.5 or 3.6 with JDT.
   http://www.eclipse.org/
2. You need an SVN plugin for Eclipse, e.g. SubClipse (http://subclipse.tigris.org,
   Eclipse update site: http://subclipse.tigris.org/update_1.6.x)
   Create new project from SVN repository
   URL: https://svn.sosy-lab.org/software/cpachecker/trunk
   URL (read-only mirror): http://cpachecker.googlecode.com/svn/trunk
3. Ignore warnings "Unsatisfied version constraint: 'org.eclipse.cdt.core ...'"
   and "Bundle 'org.eclipse.cdt.core' cannot be resolved'".
4. In order to run CPAchecker, use one of the supplied launch configurations
   or create your own.
   To select the configuration, specification, and program files use the
   text box "program arguments" in the launch configuration editor.
   Step 8 of the section "Running CPAchecker" above describes what can be entered here.
   The text box "VM arguments" needs to contain "-Djava.library.path=lib/native/<ENVIRONMENT>",
   where <ENVIRONMENT> is replaced with one of the following depending on your system:
   		ppc-macosx, x86_64-linux, x86-linux, x86_64-macosx, x86-macosx,  x86-win32

5. Optional, only for CPAchecker developers:
   If you want to work with the source of Eclipse CDT, check out the source code from CVS
   as an Eclipse project with the exact name "Eclipse CDT core".
   Repository URL: pserver://anonymous@dev.exlipse.org/cvsroot/tools
   Module: org.eclipse.cdt/all/org.eclipse.cdt.core
   Tag: CDT_7_0_2

Using CPAchecker as an Eclipse plugin for your C projects
---------------------------------------------------------
1. You need Eclipse 3.5 with CDT 6 or Eclipse 3.6 with CDT 7.
2. Add the URL http://www.sosy-lab.org/~dbeyer/eclipse-download/ as an update site to Eclipse.
3. Install CPAclipse plugin.

Using CPAchecker as an Eclipse plugin for your C projects (for CPAchecker developers)
-------------------------------------------------------------------------------------
1. You need Eclipse 3.5 with CDT 6 or Eclipse 3.6 with CDT 7.
   You also need the Eclipse Plugin Development Environment.
   If you have CDT 6, you need the package "Eclipse C/C++ Development Tools SDK"
   (Eclipse update site: http://download.eclipse.org/tools/cdt/releases/galileo).
   If you have CDT 7, you need the package "Eclipse C/C++ Development Tools".
   Also install an SVN plugin, e.g. SubClipse (see above).
2. Create an Eclipse project for CPAchecker as described above.
3. Create an Eclipse project for CPAclipse from the SVN repository
   URL: https://svn.sosy-lab.org/software/cpachecker/trunk/plugin/CPAclipse
4. If there are warnings about missing bundles, you don't have CDT in the correct version.
5. Run the CPAclipse project as an "Eclipse Application".


Troubleshooting:
----------------
- Libraries are missing.
  Error (example): "libgmpxx.so.4: cannot open shared object file: No such file or directory"
  Solution: Install the missing library ('libgmpxx4ldbl' in this case on debian/ubuntu systems)


Examples of working installation:
pwendler 2011-05-12
0. x64 Linux
1. OpenJDK 1.6.0_20
2. Eclipse 3.5 (Galileo)
4. CDT 6.0

pwendler 2011-05-12
0. x64 Linux
1. OpenJDK 1.6.0_20
2. Eclipse 3.6 (Helios)
4. CDT 7.0

dbeyer 2011-07-15
0. x64 Linux
1. OpenJDK 1.6.0_22
2. Eclipse 3.7 (Indigo)
4. CDT 8.0
